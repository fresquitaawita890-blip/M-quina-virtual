name: Roblox_VM_Final_Final
on: workflow_dispatch
jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: Forzar_Apertura
        run: |
          netsh advfirewall set allprofiles state off
          Invoke-WebRequest -Uri "https://download.anydesk.com/AnyDesk.exe" -OutFile "AnyDesk.exe"
          Start-Process -FilePath ".\AnyDesk.exe" -ArgumentList "--set-password RobloxVM2026"
          
      - name: Obtener_ID_Insistente
        run: |
          echo "Esperando a que AnyDesk despierte..."
          Start-Sleep -Seconds 30
          # Intento 1
          $id = ./AnyDesk.exe --get-id
          # Si sale vac√≠o, esperamos y reintentamos
          if (-not $id) { 
             Start-Sleep -Seconds 20
             $id = ./AnyDesk.exe --get-id 
          }
          echo "-----------------------"
          echo "TU_ID_ES: $id"
          echo "-----------------------"
          
      - name: Mantener_Viva
        run: Start-Sleep -Seconds 21600
        
